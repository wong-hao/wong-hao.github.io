<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Wireless Communication | Room of Requirement</title>
    <link>https://haowong.com/tag/wireless-communication/</link>
      <atom:link href="https://haowong.com/tag/wireless-communication/index.xml" rel="self" type="application/rss+xml" />
    <description>Wireless Communication</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><copyright>©</copyright><lastBuildDate>Wed, 21 Oct 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>https://haowong.com/images/icon_hub0cb53550ede56fdccc60540659dbf84_11803_512x512_fill_lanczos_center_2.png</url>
      <title>Wireless Communication</title>
      <link>https://haowong.com/tag/wireless-communication/</link>
    </image>
    
    <item>
      <title>Code Review of Helper programs &#39;LoRa_PKT_FWD&#39;</title>
      <link>https://haowong.com/project/codereview/</link>
      <pubDate>Wed, 21 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://haowong.com/project/codereview/</guid>
      <description>&lt;h1 id=&#34;1-json-configuration-file-globalconfig&#34;&gt;1 JSON configuration file: global.config&lt;/h1&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;{
    &amp;quot;SX130x_conf&amp;quot;: { //parameters for the Lora concentrator board 
        &amp;quot;spidev_path&amp;quot;: &amp;quot;/dev/spidev0.0&amp;quot;,
        &amp;quot;lorawan_public&amp;quot;: true,
        &amp;quot;clksrc&amp;quot;: 0,
        &amp;quot;antenna_gain&amp;quot;: 0, /* antenna gain, in dBi */
        &amp;quot;full_duplex&amp;quot;: false,
        &amp;quot;precision_timestamp&amp;quot;: {
            &amp;quot;enable&amp;quot;: false,
            &amp;quot;max_ts_metrics&amp;quot;: 255,
            &amp;quot;nb_symbols&amp;quot;: 1
        },
        &amp;quot;radio_0&amp;quot;: {
            &amp;quot;enable&amp;quot;: true,
            &amp;quot;type&amp;quot;: &amp;quot;SX1250&amp;quot;,
            &amp;quot;single_input_mode&amp;quot;: true,
            &amp;quot;freq&amp;quot;: 470600000,
            &amp;quot;rssi_offset&amp;quot;: -207.0,
            &amp;quot;rssi_tcomp&amp;quot;: {&amp;quot;coeff_a&amp;quot;: 0, &amp;quot;coeff_b&amp;quot;: 0, &amp;quot;coeff_c&amp;quot;: 20.41, &amp;quot;coeff_d&amp;quot;: 2162.56, &amp;quot;coeff_e&amp;quot;: 0},
            &amp;quot;tx_enable&amp;quot;: true,
            &amp;quot;tx_freq_min&amp;quot;: 470000000,
            &amp;quot;tx_freq_max&amp;quot;: 510000000,
            &amp;quot;tx_gain_lut&amp;quot;:[
                {&amp;quot;rf_power&amp;quot;: -6, &amp;quot;pa_gain&amp;quot;: 0, &amp;quot;pwr_idx&amp;quot;:  0},
                {&amp;quot;rf_power&amp;quot;: -3, &amp;quot;pa_gain&amp;quot;: 0, &amp;quot;pwr_idx&amp;quot;:  1},
                {&amp;quot;rf_power&amp;quot;:  0, &amp;quot;pa_gain&amp;quot;: 0, &amp;quot;pwr_idx&amp;quot;:  2},
                {&amp;quot;rf_power&amp;quot;:  3, &amp;quot;pa_gain&amp;quot;: 1, &amp;quot;pwr_idx&amp;quot;:  3},
                {&amp;quot;rf_power&amp;quot;:  6, &amp;quot;pa_gain&amp;quot;: 1, &amp;quot;pwr_idx&amp;quot;:  4},
                {&amp;quot;rf_power&amp;quot;: 10, &amp;quot;pa_gain&amp;quot;: 1, &amp;quot;pwr_idx&amp;quot;:  5},
                {&amp;quot;rf_power&amp;quot;: 11, &amp;quot;pa_gain&amp;quot;: 1, &amp;quot;pwr_idx&amp;quot;:  6},
                {&amp;quot;rf_power&amp;quot;: 12, &amp;quot;pa_gain&amp;quot;: 2, &amp;quot;pwr_idx&amp;quot;:  7},
                {&amp;quot;rf_power&amp;quot;: 13, &amp;quot;pa_gain&amp;quot;: 1, &amp;quot;pwr_idx&amp;quot;:  8},
                {&amp;quot;rf_power&amp;quot;: 14, &amp;quot;pa_gain&amp;quot;: 2, &amp;quot;pwr_idx&amp;quot;:  9},
                {&amp;quot;rf_power&amp;quot;: 16, &amp;quot;pa_gain&amp;quot;: 2, &amp;quot;pwr_idx&amp;quot;: 10},
                {&amp;quot;rf_power&amp;quot;: 20, &amp;quot;pa_gain&amp;quot;: 3, &amp;quot;pwr_idx&amp;quot;: 11},
                {&amp;quot;rf_power&amp;quot;: 23, &amp;quot;pa_gain&amp;quot;: 3, &amp;quot;pwr_idx&amp;quot;: 12},
                {&amp;quot;rf_power&amp;quot;: 25, &amp;quot;pa_gain&amp;quot;: 3, &amp;quot;pwr_idx&amp;quot;: 13},
                {&amp;quot;rf_power&amp;quot;: 26, &amp;quot;pa_gain&amp;quot;: 3, &amp;quot;pwr_idx&amp;quot;: 14},
                {&amp;quot;rf_power&amp;quot;: 27, &amp;quot;pa_gain&amp;quot;: 3, &amp;quot;pwr_idx&amp;quot;: 15}
            ]
        },
        &amp;quot;radio_1&amp;quot;: {
            &amp;quot;enable&amp;quot;: true,
            &amp;quot;type&amp;quot;: &amp;quot;SX1250&amp;quot;,
            &amp;quot;single_input_mode&amp;quot;: true,
            &amp;quot;freq&amp;quot;: 471400000,
            &amp;quot;rssi_offset&amp;quot;: -207.0,
            &amp;quot;rssi_tcomp&amp;quot;: {&amp;quot;coeff_a&amp;quot;: 0, &amp;quot;coeff_b&amp;quot;: 0, &amp;quot;coeff_c&amp;quot;: 20.41, &amp;quot;coeff_d&amp;quot;: 2162.56, &amp;quot;coeff_e&amp;quot;: 0},
            &amp;quot;tx_enable&amp;quot;: false
        },
        &amp;quot;chan_multiSF_0&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 0, &amp;quot;if&amp;quot;: -300000},
        &amp;quot;chan_multiSF_1&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 0, &amp;quot;if&amp;quot;: -100000},
        &amp;quot;chan_multiSF_2&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 0, &amp;quot;if&amp;quot;:  100000},
        &amp;quot;chan_multiSF_3&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 0, &amp;quot;if&amp;quot;:  300000},
        &amp;quot;chan_multiSF_4&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 1, &amp;quot;if&amp;quot;: -300000},
        &amp;quot;chan_multiSF_5&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 1, &amp;quot;if&amp;quot;: -100000},
        &amp;quot;chan_multiSF_6&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 1, &amp;quot;if&amp;quot;:  100000},
        &amp;quot;chan_multiSF_7&amp;quot;: {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 1, &amp;quot;if&amp;quot;:  300000},
        &amp;quot;chan_Lora_std&amp;quot;:  {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 1, &amp;quot;if&amp;quot;: -200000, &amp;quot;bandwidth&amp;quot;: 250000, &amp;quot;spread_factor&amp;quot;: 7,
                           &amp;quot;implicit_hdr&amp;quot;: false, &amp;quot;implicit_payload_length&amp;quot;: 17, &amp;quot;implicit_crc_en&amp;quot;: false, &amp;quot;implicit_coderate&amp;quot;: 1},
        &amp;quot;chan_FSK&amp;quot;:       {&amp;quot;enable&amp;quot;: true, &amp;quot;radio&amp;quot;: 1, &amp;quot;if&amp;quot;:  300000, &amp;quot;bandwidth&amp;quot;: 125000, &amp;quot;datarate&amp;quot;: 50000}
    },

    &amp;quot;gateway_conf&amp;quot;: { //gateway parameters
        &amp;quot;gateway_ID&amp;quot;: &amp;quot;fffedca6320e9516&amp;quot;,
        /* change with default server address/ports */
        &amp;quot;server_address&amp;quot;: &amp;quot;loragw.things.qcloud.com&amp;quot;,
        &amp;quot;serv_port_up&amp;quot;: 1700,
        &amp;quot;serv_port_down&amp;quot;: 1700,
        /* adjust the following parameters for your network */
        &amp;quot;keepalive_interval&amp;quot;: 10,
        &amp;quot;stat_interval&amp;quot;: 30,
        &amp;quot;push_timeout_ms&amp;quot;: 100,
        /* forward only valid packets */
        &amp;quot;forward_crc_valid&amp;quot;: true,
        &amp;quot;forward_crc_error&amp;quot;: false,
        &amp;quot;forward_crc_disabled&amp;quot;: false,
        /* Beaconing parameters */
        &amp;quot;beacon_period&amp;quot;: 0,
        &amp;quot;beacon_freq_hz&amp;quot;: 869525000,
        &amp;quot;beacon_datarate&amp;quot;: 9,
        &amp;quot;beacon_bw_hz&amp;quot;: 125000,
        &amp;quot;beacon_power&amp;quot;: 14,
        &amp;quot;beacon_infodesc&amp;quot;: 0
    },

    &amp;quot;debug_conf&amp;quot;: {
        &amp;quot;ref_payload&amp;quot;:[
            {&amp;quot;id&amp;quot;: &amp;quot;0xCAFE1234&amp;quot;},
            {&amp;quot;id&amp;quot;: &amp;quot;0xCAFE2345&amp;quot;}
        ],
        &amp;quot;log_file&amp;quot;: &amp;quot;loragw_hal.log&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;2-dependancies&#34;&gt;2 DEPENDANCIES&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;注意：.h文件介绍用法，.c文件介绍实现，都需要看&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;21-c-library-function&#34;&gt;2.1 c library function&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;stdint.h&amp;gt;         /* C99 types */
#include &amp;lt;stdbool.h&amp;gt;        /* bool type */
#include &amp;lt;stdio.h&amp;gt;          /* printf, fprintf, snprintf, fopen, fputs */
#include &amp;lt;inttypes.h&amp;gt;       /* PRIx64, PRIu64... */

#include &amp;lt;string.h&amp;gt;         /* memset */
#include &amp;lt;signal.h&amp;gt;         /* sigaction */
#include &amp;lt;time.h&amp;gt;           /* time, clock_gettime, strftime, gmtime */
#include &amp;lt;sys/time.h&amp;gt;       /* timeval */
#include &amp;lt;unistd.h&amp;gt;         /* getopt, access */
#include &amp;lt;stdlib.h&amp;gt;         /* atoi, exit */
#include &amp;lt;errno.h&amp;gt;          /* error messages */
#include &amp;lt;math.h&amp;gt;           /* modf */

#include &amp;lt;sys/socket.h&amp;gt;     /* socket specific definitions */
#include &amp;lt;netinet/in.h&amp;gt;     /* INET constants and stuff */
#include &amp;lt;arpa/inet.h&amp;gt;      /* IP address conversion stuff */
#include &amp;lt;netdb.h&amp;gt;          /* gai_strerror */

#include &amp;lt;pthread.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;211-复杂函数&#34;&gt;2.1.1 复杂函数&lt;/h3&gt;
&lt;h4 id=&#34;2111-thread&#34;&gt;2.1.1.1 thread&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/yusiguyuan/article/details/40627775&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;pthread_mutex_lock() / pthread_mutex_unlock()&lt;/code&gt;&lt;/a&gt;，注意每次使用时lock的pthread_mutex_t对象都不同&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://ask.csdn.net/questions/267690?utm_medium=distribute.pc_relevant_t0.none-task-ask_topic-BlogCommendFromBaidu-1.control&amp;amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-ask_topic-BlogCommendFromBaidu-1.control&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;pthread_join()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cnblogs.com/lijunamneg/archive/2013/01/25/2877211.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;phtread_cancel()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/zyex1108/article/details/45154211&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;time()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.runoob.com/cprogramming/c-function-gmtime.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;gtime()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/SanQi_Abao/article/details/94964665&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;strftime()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/weixin_44880138/article/details/102605681&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;clock_gettime&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;2112-socket&#34;&gt;2.1.1.2 socket&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/z735640642/article/details/84306589&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;setsockopt()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cnblogs.com/fnlingnzb-learner/p/8523206.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;recv()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;2113-string&#34;&gt;2.1.1.3 String&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://baike.baidu.com/item/snprintf%28%29&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;snprintf()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;2114-sequence&#34;&gt;2.1.1.4 Sequence&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/dwell548560/article/details/76187095&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;#if...#endif &lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;22-libtools&#34;&gt;2.2 libtools&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;quot;parson.h&amp;quot;  //.. / libtools / src / parson.c
#include &amp;quot;base64.h&amp;quot; //.. / libtools / src / base64.c
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;221-复杂函数&#34;&gt;2.2.1 复杂函数&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;http://kgabis.github.io/parson/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Parson library&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;23-core-library-libloragw&#34;&gt;2.3 Core library: libloragw&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;quot;loragw_hal.h&amp;quot; //.. / libloragw / src / loragw_hal.c
#include &amp;quot;loragw_aux.h&amp;quot; //.. / libloragw / src / loragw_aux.c
#include &amp;quot;loragw_reg.h&amp;quot; //.. / libloragw / src / loragw_reg.c
#include &amp;quot;loragw_gps.h&amp;quot; //.. / libloragw / src / loragw_gps.c
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;24-jitqueue&#34;&gt;2.4 jitqueue&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;quot;jitqueue.h&amp;quot; //.. / packet_forwarder / src / jitqueue.c
#include &amp;quot;trace.h&amp;quot; //.. / packet_forwarder / inc / trace.h
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;3-private-functions-and-threads&#34;&gt;3 PRIVATE FUNCTIONS and threads&lt;/h1&gt;
&lt;h2 id=&#34;31-theory&#34;&gt;3.1 Theory&lt;/h2&gt;
&lt;h3 id=&#34;311-main&#34;&gt;3.1.1 main&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;main&lt;/code&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;usage&lt;/code&gt;：&lt;code&gt;./lora_pkt_fwd -h&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse_SX130x_configuration&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse_gateway_configuration&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse_debug_configuration&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sig_handler&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;5 threads&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;作用：2~4显示固定内容，thread_up显示UPSTREAM json内容，main显示5 threads得到的统计内容，详见3.2节&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;312-5-threads&#34;&gt;3.1.2 5 threads&lt;/h3&gt;
&lt;p&gt;/* &amp;mdash; THREAD 1: RECEIVING PACKETS AND FORWARDING THEM &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- */&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thread_up&lt;/code&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sig_handler&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;difftimespec&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;/* &amp;mdash; THREAD 2: POLLING SERVER AND ENQUEUING PACKETS IN JIT QUEUE &amp;mdash;&amp;mdash;&amp;mdash;- */&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thread_down&lt;/code&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sig_handler&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;difftimespec&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;crc16&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;get_tx_gain_lut_index&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;send_tx_ack&lt;/code&gt;：gps_enabled与gps_ref_valid任意一个不满足都会发送JIT_ERROR_GPS_UNLOCKED，说明gps出问题统一用&lt;strong&gt;UNLOCKED&lt;/strong&gt;代替&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;jit_init&lt;/code&gt;：对应THREAD 2：thread_down&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;jit_enqueue&lt;/code&gt;：对应THREAD 2：thread_down&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;/* &amp;mdash; THREAD 3: CHECKING PACKETS TO BE SENT FROM JIT QUEUE AND SEND THEM &amp;mdash; */&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thread_jit&lt;/code&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sig_handler&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;print_tx_status&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;jit_peek&lt;/code&gt;：对应THREAD 3：thread_jit&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;jit_dequeue&lt;/code&gt;：对应THREAD 3：thread_jit&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;jit_queue_is_full/jit_queue_is_empty&lt;/code&gt;：被上述四个函数调用的private functions&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;分析是从gateway到node的通信--just-in-time-downlink-schedulinghttpsgiteecomrejeeegw1302streemasterpacket_forwarder&#34;&gt;分析：是从gateway到node的通信,  &lt;a href=&#34;https://gitee.com/rejeee/gw1302s/tree/master/packet_forwarder&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Just-In-Time&amp;rdquo; downlink scheduling&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;/* &amp;mdash; THREAD 4: PARSE GPS MESSAGE AND KEEP GATEWAY IN SYNC &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; */&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thread_gps&lt;/code&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;gps_process_sync&lt;/code&gt;：time_reference_gps；具体的GPS &amp;lt;-&amp;gt; timestamp TIME REFERENCE&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gps_process_coords&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;/* &amp;mdash; THREAD 5: CHECK TIME REFERENCE AND CALCULATE XTAL CORRECTION &amp;mdash;&amp;mdash;&amp;mdash; */&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thread_valid&lt;/code&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sig_handler&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;变量控制&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;TIME REFERENCE：gps_ref_valid；用于判断是否启用TIME REFERENCE&lt;/li&gt;
&lt;li&gt;XTAL CORRECTION：
&lt;ul&gt;
&lt;li&gt;xtal_correct_ok&lt;/li&gt;
&lt;li&gt;xtal_correct&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;32-empirical-experiment&#34;&gt;3.2 Empirical experiment&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;//main(): display version informations
*** Packet Forwarder ***
Version: 1.0.5
*** SX1302 HAL library version info ***
Version: 1.0.5;
***
//main(): display host endianness
INFO: Little endian host
INFO: found configuration file global_conf.json, parsing it

//parse_SX130x_configuration(): point to the gateway configuration object
INFO: global_conf.json does contain a JSON object named SX130x_conf, parsing SX1302 parameters
INFO: spidev_path /dev/spidev0.0, lorawan_public 1, clksrc 0, full_duplex 0
INFO: antenna_gain 0 dBi
INFO: Configuring legacy timestamp
INFO: Configuring Tx Gain LUT for rf_chain 0 with 16 indexes for sx1250
INFO: radio 0 enabled (type SX1250), center frequency 474600000, RSSI offset -207.000000, tx enabled 1, single input mode 1
INFO: radio 1 enabled (type SX1250), center frequency 475400000, RSSI offset -207.000000, tx enabled 0, single input mode 1
INFO: Lora multi-SF channel 0&amp;gt;  radio 0, IF -300000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 1&amp;gt;  radio 0, IF -100000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 2&amp;gt;  radio 0, IF 100000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 3&amp;gt;  radio 0, IF 300000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 4&amp;gt;  radio 1, IF -300000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 5&amp;gt;  radio 1, IF -100000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 6&amp;gt;  radio 1, IF 100000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora multi-SF channel 7&amp;gt;  radio 1, IF 300000 Hz, 125 kHz bw, SF 5 to 12
INFO: Lora std channel&amp;gt; radio 1, IF -200000 Hz, 250000 Hz bw, SF 7, Explicit header
INFO: FSK channel&amp;gt; radio 1, IF 300000 Hz, 125000 Hz bw, 50000 bps datarate

//parse_gateway_configuration(): point to the gateway configuration object
INFO: global_conf.json does contain a JSON object named gateway_conf, parsing gateway parameters
INFO: gateway MAC address is configured to 0016C001FF10D3F6
INFO: server hostname or IP address is configured to &amp;quot;47.110.36.225&amp;quot;
INFO: upstream port is configured to &amp;quot;1700&amp;quot;
INFO: downstream port is configured to &amp;quot;1700&amp;quot;
INFO: downstream keep-alive interval is configured to 10 seconds
INFO: statistics display interval is configured to 30 seconds
INFO: upstream PUSH_DATA time-out is configured to 100 ms
INFO: packets received with a valid CRC will be forwarded
INFO: packets received with a CRC error will NOT be forwarded
INFO: packets received with no CRC will NOT be forwarded
INFO: Beaconing period is configured to 0 seconds //disable class B beacon
INFO: Beaconing signal will be emitted at 869525000 Hz
INFO: Beaconing datarate is set to SF9
INFO: Beaconing modulation bandwidth is set to 125000Hz
INFO: Beaconing TX power is set to 14dBm
INFO: Beaconing information descriptor is set to 0

//parse_debug_configuration(): point to the gateway configuration object
INFO: global_conf.json does contain a JSON object named debug_conf, parsing debug parameters
INFO: got 2 debug reference payload
INFO: reference payload ID 0 is 0xCAFE1234
INFO: reference payload ID 1 is 0xCAFE2345
INFO: setting debug log file name to loragw_hal.log

//main(): Board reset
CoreCell reset through GPIO7...

//?
INFO: Configuring SX1250_0 in single input mode
INFO: Configuring SX1250_1 in single input mode

//main(): starting the concentrator
INFO: [main] concentrator started, packet can now be received
INFO: concentrator EUI: 0x0016c001ff10d3f6
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;
INFO: Received pkt from mote: 1350200C (fcnt=13)

//thread_up(): start of JSON structure
JSON up: {&amp;quot;rxpk&amp;quot;:[{&amp;quot;jver&amp;quot;:1,&amp;quot;tmst&amp;quot;:137795171,&amp;quot;chan&amp;quot;:4,&amp;quot;rfch&amp;quot;:1,&amp;quot;freq&amp;quot;:475.100000,&amp;quot;mid&amp;quot;:0,&amp;quot;stat&amp;quot;:1,&amp;quot;modu&amp;quot;:&amp;quot;LORA&amp;quot;,&amp;quot;datr&amp;quot;:&amp;quot;SF12Bw125&amp;quot;,&amp;quot;codr&amp;quot;:&amp;quot;4/5&amp;quot;,&amp;quot;rssis&amp;quot;:-84,&amp;quot;lsnr&amp;quot;:-5.0,&amp;quot;foff&amp;quot;:786,&amp;quot;rssi&amp;quot;:-80,&amp;quot;size&amp;quot;:13,&amp;quot;data&amp;quot;:&amp;quot;gQwgUBMADQANAKvN7w==&amp;quot;}]}

//thread_up(): send datagram to server + wait for acknowledge (in 2 times, to catch extra packets)
INFO: [up] PUSH_ACK received in 40ms

//thread_down(): if the datagram is an ACK, check token
INFO: [down] PULL_ACK received in 34ms

//main(): display a report
##### 2020-10-18 10:49:51 GMT #####

### [UPSTREAM] ###
# RF packets received by concentrator: 1 //thread_up
# CRC_OK: 100.00%, CRC_FAIL: 0.00%, NO_CRC: 0.00% //thread_up
# RF packets forwarded: 1 (13 bytes) //thread_up(thread_up)
# PUSH_DATA datagrams sent: 2 (360 bytes) //PUSH_DATA：thread_up(thread_up)
# PUSH_DATA acknowledeged: 100.00% //PUSH_ACK：thread_up

### [DOWNSTREAM] ###
# PULL_DATA sent: 3 (100.00%) //PULL_DATA(PULL_ACK)：thread_down
# PULL_RESP(onse) datagrams received: 0 (0 bytes) //PULL_RESP：thread_down(thread_down)
# RF packets sent to concentrator: 0 (0 bytes) //thread_jit发送jit里的downlink packet(thread_down)
/*sent = ok + error*/
# TX errors: 0 //RF packets sent to concentrator失败的
if (cp_nb_tx_requested != 0 ) //thread_down根据PULL_RESP得到的downlink_type使得packet enqueue jit
# TX rejected... //TX_ACK：packet enqueue失败的；send_tx_ack发送具体错误


### SX1302 Status ###
# SX1302 counter (INST): 150921885
# SX1302 counter (PPS): 0
# BEACON queued: 0 //thread_down根据JIT_PKT_TYPE_BEACON使得beacon enqueue jit
# BEACON sent so far: 0 //RF packets sent to concentrator对应的
# BEACON rejected: 0 //BEACON queued失败的

### [JIT] ###
src/jitqueue.c:442:jit_print_queue(): INFO: [jit] queue is empty //thread_down
#--------
src/jitqueue.c:442:jit_print_queue(): INFO: [jit] queue is empty //thread_down

### [GPS] ###
# GPS sync is disabled
### Concentrator temperature 0 C ###
##### END #####
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;/*main()生成： generate a JSON report (will be sent to server by upstream thread)
thread_up()发送：add status report if a new one is available (&#39;status report&#39;: &amp;quot;stat&amp;quot; object)
其实本来和上面的rxpt对象同属于一个json，“同时发送显示”；但是因为程序运行顺序原因“同时发送不同时显示”了
*/
JSON up: {&amp;quot;stat&amp;quot;:{&amp;quot;time&amp;quot;:&amp;quot;2020-10-18 10:49:51 GMT&amp;quot;,&amp;quot;rxnb&amp;quot;:1,&amp;quot;rxok&amp;quot;:1,&amp;quot;rxfw&amp;quot;:1,&amp;quot;ackr&amp;quot;:100.0,&amp;quot;dwnb&amp;quot;:0,&amp;quot;txnb&amp;quot;:0,&amp;quot;temp&amp;quot;:0.0}}

//thread_up():  send datagram to server + wait for acknowledge (in 2 times, to catch extra packets)
INFO: [up] PUSH_ACK received in 34ms

//thread_down(): if the datagram is an ACK, check token
INFO: [down] PULL_ACK received in 35ms
INFO: [down] PULL_ACK received in 37ms
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;//thread_up()
INFO: End of upstream thread

//main(): if an exit signal was received, try to quit properly + Board reset
INFO: concentrator stopped successfully
CoreCell reset through GPIO7...
INFO: Exiting packet forwarder program
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;33-basic-communication-protocol-between-lora-gateway-and-network-server&#34;&gt;3.3 Basic communication protocol between LoRa gateway and Network Server&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/blob/master/packet_forwarder/PROTOCOL.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PROTOCOL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOmI6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRVJ4VTcxc1RCNFJEaFhVU0RUTXlXdU1CNHc1NHQyZ3JhT3NvdUpVckszYkt0dz9lPUVoWXBMdw==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LoRaWAN Network Server Demonstration:
Gateway to Server Interface Definition&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOmI6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRWV6TEpyY0lBMEJBbUpGQVlpN0NpcDRCWENDZEVFWm43RjZ6SXVJbmlvUDZzZz9lPUhQdGE5bA==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LoRaWAN Network Server Demonstration:
Inter-Server interface definition&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;331-upstream-protocol&#34;&gt;3.3.1 UPstream protocol&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;PUSH_DATA packet：thread_up&lt;/li&gt;
&lt;li&gt;PUSH_ACK packet：thread_up&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;332-downstream-protocol&#34;&gt;3.3.2 Downstream protocol&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;PULL_DATA packet：thread_down&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PULL_ACK packet：thread_down&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PULL_RESP packet：thread_down&lt;/p&gt;
&lt;p&gt;prase这些packet的json分辨Class&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Class C：imme (immediately)&lt;/li&gt;
&lt;li&gt;Class A：tmst (timestamp)，一般不采用：因为global.config中gps_tty_path与beacon_period的设置&lt;/li&gt;
&lt;li&gt;Class B：tmms (GPS time -&amp;gt; timestamp)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;根据数据包类型将其&lt;code&gt;jit_enqueue&lt;/code&gt;到jit_queue&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TX_ACK packet：thread_down&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;4-compile-install-and-run-instructions&#34;&gt;4 Compile, install and run instructions&lt;/h1&gt;
&lt;p&gt;在&lt;strong&gt;gw1302s&lt;/strong&gt;执行&lt;code&gt;make clean all&lt;/code&gt;，调用所有helper program的make clean，即Clean and compile everything&lt;/p&gt;
&lt;p&gt;再执行&lt;code&gt;make install&lt;/code&gt;，调用所有helper program的make install，把可执行程序都&lt;code&gt;scp&lt;/code&gt;到gw1302s/bin中&lt;/p&gt;
&lt;h1 id=&#34;5-问题&#34;&gt;5 问题&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; GPS、beacon、Class B相关看不看&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; 温度相关&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; RF packets forwarded比PUSH_DATA datagrams sent少&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; DEPENDANCIES相关的函数定义及实现&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>LoRa and LoRaWAN</title>
      <link>https://haowong.com/project/internal-project/</link>
      <pubDate>Tue, 06 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://haowong.com/project/internal-project/</guid>
      <description>&lt;h1 id=&#34;1-实验环境&#34;&gt;1 实验环境&lt;/h1&gt;
&lt;h2 id=&#34;11-操作系统&#34;&gt;1.1 操作系统&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Raspberry Pi OS (32-bit) with desktop and recommended software&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意仅能使用Linux Kernel version:&lt;a href=&#34;http://downloads.raspberrypi.org/raspios_armhf/release_notes.txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;4.19.118&lt;/a&gt;及以下的版本，否则由于硬件使用GPIO7作为SX1302的RESET，与树莓派的SPI0.1的CS脚&lt;a href=&#34;https://www.cnblogs.com/answerinthewind/p/13154904.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;冲突&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;// 报错提示
./reset_lgw.sh: 22: echo: echo: I/O error
./reset_lgw.sh: 25: ./reset_lgw.sh: cannot create /sys/class/gpio/gpio7/direction: Directory noexistent
CoreCell reset through GPIO7...
./reset_lgw.sh: 32: ./reset_lgw.sh: cannot create /sys/class/gpio/gpio7/value: Directory noexistent
./reset_lgw.sh: 33: ./reset_lgw.sh: cannot create /sys/class/gpio/gpio7/value: Directory noexistent
ERROR: failed to connect
// 或者是
ERROR: [main] failed to start the concentrator 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/commit/b06b85a7c87fce9f7d462f55b5913a3dc0c47df9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gitee版本代码&lt;/a&gt;相比&lt;a href=&#34;https://github.com/Lora-net/sx1302_hal/commit/6291e62ef9a161ae41037a0df1a86e9943a907b9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github&lt;/a&gt;做了三点改变：
&lt;strong&gt;&lt;em&gt;其实Gitee之前的commit全部是copy的Github，就最后改了下&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用&lt;code&gt;#if USE_I2C_SENSOR ... #endif&lt;/code&gt;注释了 I2C 接口的温度传感器代码（&lt;em&gt;据说不注释掉不能启动&lt;/em&gt;）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;boardconf.lorawan_public = true&lt;/strong&gt;改成了&lt;strong&gt;boardconf.lorawan_public = false&lt;/strong&gt;，收发测试程序的同步字修改为 &lt;strong&gt;private&lt;/strong&gt; 即 &lt;strong&gt;0x12&lt;/strong&gt;；但这与安装生成的&lt;strong&gt;global.config&lt;/strong&gt;文件中的同步字设置不同，故实际收发与测试时，终端同步字设置相反&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SX1302_RESET_PIN=23&lt;/strong&gt;改成了&lt;strong&gt;SX1302_RESET_PIN=7&lt;/strong&gt;且去掉了GPIO18相关代码
（&lt;em&gt;GPIO7存在才能启动，GPIO18改不改没关系&lt;/em&gt;）&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;网关射频模组
&lt;ul&gt;
&lt;li&gt;寄存器读写测试：1%概率成功
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;pi@raspberrypi:~/gw1302s/bin $ ./test_loragw_reg
CoreCell reset through GPIO7...
## TEST#1: read all registers and check default value for non-read-only registers
________________
TEST#1 PASSED
________________

## TEST#2: read/write test on all non-read-only, non-pulse, non-w0clr, non-wlclr registers
________________
TEST#2 PASSED
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;发送测试成功
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;pi@raspberrypi:~/gw1302s/bin $ ./test_loragw_hal_tx -r 1250 -f 480.1 -m LORA -b 125 -s 12 -z 20
Sending 1 LoRa packets on 480100000 Hz (Bw 125 kHz, SF 12, CR 1, 20 bytes payload, 8 symbols preamble, explicit header, non-inverted polarity) at 0 dBm TX done

Nb packets sent: 1 (1)
CoreCell reset through GPIO7...
=========== Test End ===========
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;接受测试：官方建议&lt;a href=&#34;https://www.bilibili.com/video/BV1Yt411N7MV&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;M-HL9-EV连金黄天线&lt;/a&gt;，但实测用直黑天线也行，且发包间隔要长，避免丢包接收不到
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;pi@raspberrypi:~/gw1302s/bin $ ./test_loragw_hal_rx -r 1250 -a 475.5 -b 476.5
===== sx1302 HAL RX test =====
INFO: rxpkt buffer size is set to 16
INFO: Select channel mode 0
CoreCell reset through GPIO7...
Waiting for packets...

----- LoRa packet -----
count_us: 51070567
size:     3
chan:     2
status:   0x11
datr:     12
codr:     1
rf_chain  1
freq_hez  476500000
snr_avg   -10.5
rssi_chan:95.0
rssi_sig :88.0
crc:      0x496E
AB CD EF
Received 1 packets (total:0)

----- LoRa packet -----
count_us: 71074694
size:     3
chan:     5
status:   0x10
datr:     12
codr:     1
rf_chain  0
freq_hez  475500000
snr_avg   6.8
rssi_chan:146.0
rssi_sig :147.0
crc:      0xC96E
AB CD EF
Received 1 packets (total:1)

----- LoRa packet -----
count_us: 91068896
size:     3
chan:     0
status:   0x10
datr:     12
codr:     1
rf_chain  1
freq_hez  476100000
snr_avg   8.5
rssi_chan:149.0
rssi_sig :150.0
crc:      0xC96E
AB CD EF
Received 1 packets (total:2)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;pi@raspberrypi:~/gw1302s/bin $ ./test_loragw_hal_rx -r 1250 -a 475.5 -b 476.5
===== sx1302 HAL RX test =====
INFO: rxpkt buffer size is set to 16
INFO: Select channel mode 0
CoreCell reset through GPIO7...
Waiting for packets...

----- LoRa packet -----
  count_us: 48944281
  size:     3
  chan:     3
  status:   0x10
  datr:     12
  codr:     1
  rf_chain  0
  freq_hez  475100000
  snr_avg   -6.5
  rssi_chan:131.0
  rssi_sig :125.0
  crc:      0x0625
12 34 56

 ----- LoRa packet -----
  count_us: 48944290
  size:     3
  chan:     0
  status:   0x10
  datr:     12
  codr:     1
  rf_chain  1
  freq_hez  476100000
  snr_avg   10.2
  rssi_chan:197.0
  rssi_sig :198.0
  crc:      0x0625
12 34 56
      
 ----- LoRa packet -----
  count_us: 48944289
  size:     3
  chan:     6
  status:   0x10
  datr:     12
  codr:     1
  rf_chain  0
  freq_hez  475100000
  snr_avg   -5.8
  rssi_chan:131.0
  rssi_sig :126.0
  crc:      0x0625
12 34 56
Received 3 packets (total:3)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;发送接收均用的&lt;strong&gt;Hex&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;12-系统备份&#34;&gt;1.2 系统备份&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOnU6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRVdLWEhRd1h5cnRDaGVTMDM0WTFsSjhCVlhJSThGUmd3QzhuZ0lFRlpqVW5EQT9lPWR1WXNKVQ==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gitee版&lt;/a&gt;采用的代码Commit id（&lt;em&gt;选用自动安装脚本&amp;rsquo;install.sh&amp;rsquo;&lt;/em&gt;）: &lt;a href=&#34;https://gitee.com/rejeee/gw1302s/commit/d9ef27fdecf2352d7ab6b85d50fb7a3e38a162ae&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;d9ef27fdecf2352d7ab6b85d50fb7a3e38a162ae&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#&#34;&gt;Github版&lt;/a&gt;采用的代码Commit id（&lt;em&gt;Gitee抄到这后面就自己改了&lt;/em&gt;）: &lt;a href=&#34;https://github.com/Lora-net/sx1302_hal/commit/6291e62ef9a161ae41037a0df1a86e9943a907b9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;6291e62ef9a161ae41037a0df1a86e9943a907b9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;卖家给了所谓&lt;strong&gt;搭建好基本环境&lt;/strong&gt;的&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOnU6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRVpVeXREN1pkTDVBZy14c3hjTXQ0NElCVEI1TTgyV2xHcWJOUFgxOGZZWmhaUT9lPXRrQUx1Zg==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;系统&lt;/a&gt;，实际上就是刷了4.19，升级了还是不能用，没解决任何问题&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://downloads.raspberrypi.org/raspbian/images/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;历代系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mirrors.tuna.tsinghua.edu.cn/raspbian-images/raspios_armhf/images/raspios_armhf-2020-05-28/2020-05-27-raspios-buster-armhf.zip&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;4.19.118系统清华镜像&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;每次更换为备份时:
&lt;ul&gt;
&lt;li&gt;&amp;ldquo;global.config&amp;quot;中&amp;quot;gateway_ID&amp;quot;都要修改与树莓派保持一致&lt;/li&gt;
&lt;li&gt;&amp;ldquo;lorawan_public&amp;quot;与发射端保持一致&lt;/li&gt;
&lt;li&gt;先连接外接显示器，新wifi密码为1234567890，注意显示器已开启热插拔,但这样会占用额外内存&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;2-实验步骤&#34;&gt;2 实验步骤&lt;/h1&gt;
&lt;h2 id=&#34;21-lorawan&#34;&gt;2.1 LoRaWAN&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/RAKwireless/article/details/106470764#%E4%B8%80%E3%80%81LoRaWAN%E5%85%B8%E5%9E%8B%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RAKwireless&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cnblogs.com/answerinthewind/p/6200497.html#4472555&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AnswerInTheWind&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://connect.ed-diamond.com/MISC/MISCHS-015/LORAWAN-deploiement-d-une-infrastructure-de-test&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;完整案例&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;22-devicesend-nodes&#34;&gt;2.2 Devices/End Nodes&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;http://www.njrjzn.com/chanpinzhongxin/SX127xmozuxilie/4.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;M-HL9-EV&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://www.rejeee.com/documents/APP_DOC/M-KL9_how_to_enter_configuration_mode.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;进入配置方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.rejeee.com/documents/APP_DOC/M-KL9_parameter.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;M-KL9&lt;/strong&gt;参数意义&lt;/a&gt;，具体配置参数看用户手册&lt;/li&gt;
&lt;li&gt;发送接收均用的&lt;strong&gt;Ascii&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;串口工具注册码: &lt;strong&gt;CCCCC-AAAAA-FFFFF-0E013-6EE85&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;配置&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;NET:       Node to Gateway
TFREQ:     475.5MHz
RFREQ:     506.5MHz
POW:       20dBm
BW:        125kHz
TSF:       12
RSF:       12
CR:        4/5
MODE:      LORA
SYNC:      0x12/0x34
PREM:      8, 10
FIX:       0, 0
CRC:       ON
TIQ:       OFF
RIQ:       ON
SEQ:       OFF
IP:        ON
AES:       OFF
ACK:       ON
LDR:       0, 0
LCP:       0
LFT:       0
RXW:       0
FNB:       0x00
TYPE:      0x00
Flash:     0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;23-gateway&#34;&gt;2.3 Gateway&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;SX1302&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://www.semtech.com/products/wireless-rf/lora-gateways/sx1302cxxxgw1&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Semtech&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.njrjzn.com/chanpinzhongxin/SX1302mozuxilie/28.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rejeee&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;LoRaWAN gateway software implementation&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://tech-journal.semtech.com/expert-series-5-things-you-need-to-know-about-lorawan-based-gateways&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;UDP Packet forwarder project&lt;/a&gt;，采用这个&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lora-developers.semtech.com/resources/tools/lora-basics-station/?url=quick.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LoRa Basics™ Station&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;global_conf.json&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/commit/c425b67a5ccaaef0dd1042da08974245124c069b&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gitee版本&lt;/a&gt;直接增加了一个文件&lt;strong&gt;gw1302s/packet_forwarder/global_conf.json&lt;/strong&gt;，其特点是&lt;strong&gt;gateway_conf&lt;/strong&gt;下面的&lt;strong&gt;server_address&lt;/strong&gt;&lt;a href=&#34;https://blog.csdn.net/RAKwireless/article/details/107101582&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;由localhost修改为了loragw.things.qcloud.com&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;make install_conf&lt;/code&gt;即安装&lt;strong&gt;global_conf.json&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;卖家给的&lt;a href=&#34;https://www.cnblogs.com/answerinthewind/p/13154904.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;攻略&lt;/a&gt;跟用&lt;code&gt;install.sh&lt;/code&gt;生成的主要差别在radio_1与radio_2的&lt;strong&gt;ferq&lt;/strong&gt;不同，攻略的效果好；官方的&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOmI6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRVQzOWdIRUc4YU5DbHFMVzBjRGkwVjBCZjZGQmUzWUpkSnh0YVhXbUlLdnFtUT9lPW9qNjEzcg==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;参考文献&lt;/a&gt;和攻略还有&lt;a href=&#34;https://www.bilibili.com/video/BV1gp4y1v7UB&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;视频&lt;/a&gt;均给出了&lt;strong&gt;global_conf.json&lt;/strong&gt;的参数意义&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://forum.chirpstack.io/t/semtech-udp-packet-forwarder-setting/9490/2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&amp;ldquo;server_address&amp;quot;与Gateway Bridge运行地址一致&lt;/a&gt;，Gateway Bridge可安装在&lt;a href=&#34;https://www.chirpstack.io/project/architecture/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网关上或云端&lt;/a&gt;，如本文就为47.110.36.225而不是localhost&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.chirpstack.io/project/guides/connect-gateway/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;查看网关是否连接上了网络服务器&lt;/a&gt;，&lt;code&gt;tcpdump&lt;/code&gt;指令需要通过&lt;code&gt;sudo apt update &amp;amp;&amp;amp; sudo apt install tcpdump&lt;/code&gt;安装&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通信参数解释&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/quending/article/details/84979181&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页一&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://forum.chirpstack.io/t/how-to-change-lora-gateway-bridge-configuration/6350/4&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页二&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/quending/article/details/86483352&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页三&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/quending/article/details/86481598&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页四&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cnblogs.com/answerinthewind/p/6213529.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页五&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.wpgdadatong.com/cn/solution/detail?PID=5357&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页六&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/blob/master/packet_forwarder/PROTOCOL.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;网页七&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Network Server connectivity&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://iot.wifx.net/docs/lorix-os/latest/user-s-guide/lorawan/packet-forwarders/udp-packet-forwarder/troubleshooting&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;0% acknowledegd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;24-network-server&#34;&gt;2.4 Network Server&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Cloud-hosted: Close Source LoRaWAN Network Servers Platforms&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;global.config&lt;/strong&gt;中的&lt;strong&gt;lorawan_public: true&lt;/strong&gt;，&lt;a href=&#34;http://lora.timeddd.com/forum.php?mod=viewthread&amp;amp;tid=521&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;连接不通&lt;/a&gt;的元凶，true对应于sync word &lt;strong&gt;0x34&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;使用树莓派搭建网关注册到腾讯物联网开发平台
&lt;ul&gt;
&lt;li&gt;主要步骤
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.njrjzn.com/zhichifuwu/chenggonganli/44.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;官网&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;补充
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.wpgdadatong.com/cn/solution/detail?PID=5357&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;获取GwEUI&lt;/a&gt;，即在&lt;strong&gt;gw1302s/bin&lt;/strong&gt;下使用&lt;code&gt;./chip_id&lt;/code&gt;，注意还要用该值替换掉&lt;strong&gt;gw1302s/bin/global_conf.json&lt;/strong&gt;中的&lt;strong&gt;gateway_ID`&lt;/strong&gt;，且需要去掉开头的0x，这是代表十六进制的开头&lt;/li&gt;
&lt;li&gt;运行&lt;code&gt;./lora_pkt_fwd&lt;/code&gt;即可看到&lt;a href=&#34;https://console.cloud.tencent.com/iotexplorer/project/prj-xpc7prs7/gateway/list?table&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;状态在线&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;云解析数据
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/RAKwireless/article/details/107251605&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;数据模板1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.tencent.com/document/product/1081/44921&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;数据模板2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;作用
&lt;ul&gt;
&lt;li&gt;判断是否真正上网了，或者说真正处理数据了&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;网关名称            GwEUI            描述            区域            运行状态       最后上报时间       添加时间
raspberrypi1    0016c001ff10d3f6    -              苏州市           在线         2020-10-01        2020-10-01
raspberrypi2    0016c001ff10d3f7    -              苏州市           在线         2020-10-01        2020-10-01
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://console.cloud.tencent.com/iotexplorer&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;腾讯物联网开发平台&lt;/a&gt;&lt;/strong&gt; 对标 &lt;strong&gt;&lt;a href=&#34;https://linkwan.console.aliyun.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;阿里云物联网络管理平台&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://console.cloud.tencent.com/iothub&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;腾讯物联网通信&lt;/a&gt;&lt;/strong&gt; 对标 &lt;strong&gt;&lt;a href=&#34;https://iot.console.aliyun.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;阿里云物联网平台&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Cloud-hosted: Open Source LoRaWAN Network Servers Platforms&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.thethingsnetwork.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The Things Network：在线版&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://console.thethingsnetwork.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TTN官方入门&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://learn.adafruit.com/the-things-network-for-feather?view=all&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TTN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.thethingsnetwork.org/docs/gateways/packet-forwarder/semtech-udp.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TTN global.config1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.thethingsnetwork.org/docs/gateways/start/connection.html#semtech-udp-protocol&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TTN global.config2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://os.mbed.com/docs/mbed-os/v5.15/tutorials/LoRa-tutorial.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Mbed-Os: TTN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.thethingsnetwork.org/forum/t/sx1302-using-semtech-packet-forwarder-can-not-register-the-gateway/41211/34&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SX1302网关转发器修改版讨论&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOmY6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRXJIZWhXTnVTa3RLaWQ5U0ZSWHFUVFFCUkV6d1FFNnlEZG5ua1dqZVc0dDU2dz9lPUswaUc5bw==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SX1302网关转发器修改版代码&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://thethingsstack.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The Things Stack：安装版&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Docket install&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://forum.rakwireless.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rakwireless&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.chirpstack.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack：安装版&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Debian install
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.chirpstack.io/project/guides/debian-ubuntu/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:Debian 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/a1989214/article/details/106832570&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:Debian 2&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;NS配置文件：&lt;strong&gt;dsn=&amp;quot;postgres://chirpstack_ns:dbpassword@localhost/chirpstack_ns?sslmode=disable&amp;rdquo;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;NS配置文件：注释掉所有&lt;strong&gt;extral chanels&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;AS配置文件：&lt;strong&gt;dsn=&amp;quot;postgres://chirpstack_as:dbpassword@localhost/chirpstack_as?sslmode=disable&amp;rdquo;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;AS配置文件：服务器运行&lt;code&gt;openssl rand -base64 32&lt;/code&gt;，添加到 &lt;strong&gt;JWT_SECRET&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;可查看NS、AS等日志 (好像与Docket install不同)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Docket install
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://fiware-lorawan.readthedocs.io/en/latest/users_manual/index.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fireware: ChirpStack+TTN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.chirpstack.io/project/guides/docker-compose/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:docker1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/Mculover666/article/details/104059771&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:docker2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.freesion.com/article/1023121538/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:docker3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/iotisan/article/details/90412873&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:docker4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/iotisan/article/details/78398978&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack:docker5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.chirpstack.io/gateway-bridge/backends/semtech-udp/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ChirpStack global.config&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;NS配置文件：注释掉所有&lt;a href=&#34;https://blog.csdn.net/zoug16/article/details/104928565&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;extral chanels&lt;/strong&gt;&lt;/a&gt;，其在/chirpstack-docker/configuration/chirpstack-network-server/chirpstack-network-server.toml&lt;/li&gt;
&lt;li&gt;Docker分离模式后台运行 &lt;code&gt;docker-compose up -d&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止部分容器 &lt;code&gt;docker ps -a&lt;/code&gt; + &lt;code&gt;docker stop 容器ID&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止所有容器 &lt;code&gt;docker stop $(docker ps -aq)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;显示部分容器日志 &lt;code&gt;docker logs -f &amp;lt;container_ID&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;显示所有容器日志  &lt;code&gt;docker-compose logs&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lora-developers.semtech.com/resources/network-server/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Semtech Network Server：在线版&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://openchirp.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenChirp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.lancaster.ac.uk/scc/sites/lora/lorasim.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LoraSim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://apac.iot.semtech.cloud/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Semtech network test servers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cn1.loriot.io/dashboard&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Loriot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;上面所有需要自行安装Stack的方法都需要注意：&lt;strong&gt;&lt;a href=&#34;https://help.aliyun.com/document_detail/25475.html?spm=a2c4g.11186623.2.14.81c071afVJYuXn#allowRemoteAccess&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;阿里云服务器配置&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;协议类型          端口范围          授权对象
UDP             8080/8080        0.0.0.0/0
UDP             1700/1700        0.0.0.0/0
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;account  password
 admin    admin
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;服务器地址&lt;/strong&gt;: http://47.110.36.225:8080/，不能设置域名解析（需要备案）&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Integrated: Gateway-Embedded LoRaWAN Network Servers Platforms&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.actility.com/lorawan-network-server/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;特点&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;3-其他&#34;&gt;3 其他&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://www.gnuradio.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GUNRadio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;与Software-defined radio (SDR)设备共用，如USRP、hackrf&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>External Project</title>
      <link>https://haowong.com/project/external-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      <guid>https://haowong.com/project/external-project/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
