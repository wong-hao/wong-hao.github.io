<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Wireless Communication | Room of Requirement</title>
    <link>https://haowong.com/tag/wireless-communication/</link>
      <atom:link href="https://haowong.com/tag/wireless-communication/index.xml" rel="self" type="application/rss+xml" />
    <description>Wireless Communication</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>©</copyright><lastBuildDate>Tue, 06 Oct 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>https://haowong.com/images/icon_hub0cb53550ede56fdccc60540659dbf84_11803_512x512_fill_lanczos_center_2.png</url>
      <title>Wireless Communication</title>
      <link>https://haowong.com/tag/wireless-communication/</link>
    </image>
    
    <item>
      <title>Rejeee SX1302S and M-HL9-EV</title>
      <link>https://haowong.com/project/internal-project/</link>
      <pubDate>Tue, 06 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://haowong.com/project/internal-project/</guid>
      <description>&lt;h3 id=&#34;1实验环境&#34;&gt;1.实验环境&lt;/h3&gt;
&lt;h4 id=&#34;11-操作系统&#34;&gt;1.1 操作系统&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;Raspberry Pi OS (32-bit) with desktop and recommended software&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意仅能使用Linux Kernel version:
&lt;a href=&#34;http://downloads.raspberrypi.org/raspios_armhf/release_notes.txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;4.19.97&lt;/a&gt;及以下的版本，否则gpio7将会占用从而一直不能正确启动&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;// 报错提示
./reset_lgw.sh: 22: echo: echo: I/O error
./reset_lgw.sh: 25: ./reset_lgw.sh: cannot create /sys/class/gpio/gpio7/direction: Directory noexistent
CoreCell reset through GPIO7...
./reset_lgw.sh: 32: ./reset_lgw.sh: cannot create /sys/class/gpio/gpio7/value: Directory noexistent
./reset_lgw.sh: 33: ./reset_lgw.sh: cannot create /sys/class/gpio/gpio7/value: Directory noexistent
ERROR: failed to connect
// 或者是
ERROR: [main] failed to start the concentrator 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/commit/b06b85a7c87fce9f7d462f55b5913a3dc0c47df9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gitee版本代码&lt;/a&gt;相比
&lt;a href=&#34;https://github.com/Lora-net/sx1302_hal/commit/6291e62ef9a161ae41037a0df1a86e9943a907b9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github&lt;/a&gt;做了三点改变：
&lt;strong&gt;&lt;em&gt;其实Gitee之前的commit全部是copy的Github，就最后改了下&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用&lt;code&gt;#if USE_I2C_SENSOR ... #endif&lt;/code&gt;消除温度传感器I2C（&lt;em&gt;据说不注释掉不能启动&lt;/em&gt;）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;boardconf.lorawan_public = true;&lt;/code&gt;改成了&lt;code&gt;boardconf.lorawan_public = false;&lt;/code&gt;
（&lt;em&gt;完全不影响&lt;/em&gt;）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SX1302_RESET_PIN=23&lt;/code&gt;改成了&lt;code&gt;SX1302_RESET_PIN=7&lt;/code&gt;且去掉了GPIO18相关代码
（&lt;em&gt;GPIO7存在才能启动，GPIO18改不改没关系&lt;/em&gt;）&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;12-备份&#34;&gt;1.2 备份&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOnU6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRWRwVnYzQldadk5HaVgxTmJhWUVhdWdCVzhBbHIxWVJCU21Zb0dyVHpfbDQ5UT9lPTljNXZmMg==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gitee版&lt;/a&gt;采用的代码Commit id（&lt;em&gt;选用自动安装脚本&amp;rsquo;install.sh&amp;rsquo;&lt;/em&gt;）: 
&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/commit/d9ef27fdecf2352d7ab6b85d50fb7a3e38a162ae&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;d9ef27fdecf2352d7ab6b85d50fb7a3e38a162ae&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOnU6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRVJsdlB0MWQ2eDVQc1lTSzgtRG5UdGNCcGRNTmVyZV81VlprZWlNa1g1UmV4dz9lPTF5ZWJicA==.mp3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github版&lt;/a&gt;采用的代码Commit id（&lt;em&gt;Gitee抄到这后面就自己改了&lt;/em&gt;）: 
&lt;a href=&#34;https://github.com/Lora-net/sx1302_hal/commit/6291e62ef9a161ae41037a0df1a86e9943a907b9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;6291e62ef9a161ae41037a0df1a86e9943a907b9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://downloads.raspberrypi.org/raspbian/images/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;历代系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://downloads.raspberrypi.org/raspbian/images/raspbian-2020-02-14/2020-02-13-raspbian-buster.zip&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;4.19.97系统镜像&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;13-m-hl9-ev&#34;&gt;1.3 M-HL9-EV&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;按键
&lt;ul&gt;
&lt;li&gt;模式切换
&lt;ul&gt;
&lt;li&gt;透传模式要先使用&lt;code&gt;+++&lt;/code&gt;进入AT模式&lt;/li&gt;
&lt;li&gt;AT模式可直接使用AT指令&lt;/li&gt;
&lt;li&gt;（&lt;em&gt;AT指令需且仅需在指令后空一行再发送，但与&amp;rsquo;自动换行&amp;rsquo;无关，那个是屏幕上显示的东西换行&lt;/em&gt;）&lt;/li&gt;
&lt;li&gt;AT模式下不能发送接收数据，需要使用AT指令&lt;code&gt;ATT&lt;/code&gt;返回透传模式&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;复位按键
&lt;ul&gt;
&lt;li&gt;重置串口&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2实验步骤&#34;&gt;2.实验步骤&lt;/h3&gt;
&lt;h4 id=&#34;21硬件&#34;&gt;2.1硬件&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;sx1302连直黑天线&lt;/li&gt;
&lt;li&gt;官方建议
&lt;a href=&#34;https://www.bilibili.com/video/BV1Yt411N7MV&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;M-HL9-EV连金黄天线&lt;/a&gt;，但实测用直黑天线进行接受测试效果更好&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;使用树莓派搭建网关注册到腾讯云
&lt;ul&gt;
&lt;li&gt;主要步骤
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&#34;http://www.njrjzn.com/zhichifuwu/chenggonganli/44.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;官网&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;补充
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&#34;https://www.wpgdadatong.com/cn/solution/detail?PID=5357&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;获取GwEUI&lt;/a&gt;，即在&lt;code&gt;gw1302s/bin&lt;/code&gt;下使用&lt;code&gt;./chip_id&lt;/code&gt;，注意还要用该值替换掉&lt;code&gt;gw1302s/bin/global_conf.json&lt;/code&gt;中的&lt;code&gt;gateway_ID&lt;/code&gt;，且需要去掉开头的0x，这是代表十六进制的开头&lt;/li&gt;
&lt;li&gt;运行&lt;code&gt;./lora_pkt_fwd&lt;/code&gt;即可看到
&lt;a href=&#34;https://console.cloud.tencent.com/iotexplorer/project/prj-xpc7prs7/gateway/list?table&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;状态在线&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://zhuanlan.zhihu.com/p/158540396&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;云处理数据&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;作用
&lt;ul&gt;
&lt;li&gt;判断是否真正上网了，或者说真正处理数据了
&lt;img src=&#34;https://onedrive.gimhoy.com/sharepoint/aHR0cHM6Ly9zZXVlZHVjbjEtbXkuc2hhcmVwb2ludC5jb20vOmk6L2cvcGVyc29uYWwvMjIwMjA0NjAxX3NldV9lZHVfY24vRWJKVlJHRExxQjlJdDdvaU1nM3k3TU1CUWdVUGhCa0lwQWVnTk11cDZ6VEp5UT9lPTJoUGlUYQ==.mp3&#34; alt=&#34;image&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;注意
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&#34;https://gitee.com/rejeee/gw1302s/commit/c425b67a5ccaaef0dd1042da08974245124c069b&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gitee版本&lt;/a&gt;直接增加了一个文件&lt;code&gt;gw1302s/packet_forwarder/global_conf.json&lt;/code&gt;，并将其中的&lt;code&gt;&amp;quot;gateway_conf&amp;quot;&lt;/code&gt;下面的&lt;code&gt;server_address&lt;/code&gt;
&lt;a href=&#34;https://zhuanlan.zhihu.com/p/154451911&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;默认值localhost修改为了腾讯云&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;卖家给的
&lt;a href=&#34;https://www.cnblogs.com/answerinthewind/p/13154904.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;攻略&lt;/a&gt;有另一种&lt;code&gt;global_conf.json&lt;/code&gt;的思路&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;22源码&#34;&gt;2.2源码&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;gw1302s/libloragw&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gw1302s/packet_forwarder&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gw1302s/tools/payload_tools&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gw1302s/util_net_downlink&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gw1302s/util_chip_id&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;五个Helper program在主目录下，通过每个Helper下的&lt;code&gt;makefile&lt;/code&gt;文件将必要的文件&lt;code&gt;scp&lt;/code&gt;到&lt;code&gt;../target.cfg&lt;/code&gt;中的&lt;code&gt;TARGET_DIR&lt;/code&gt;中&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;故&lt;code&gt;gw1302s/bin&lt;/code&gt;下看不懂的文件去看对应Helper program下的&lt;code&gt;Readme.md&lt;/code&gt;，但执行还是在这里执行&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>External Project</title>
      <link>https://haowong.com/project/external-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      <guid>https://haowong.com/project/external-project/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
